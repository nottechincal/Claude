# ======================================
# Stuffed Lamb VAPI Ordering System
# Environment Configuration Template
# ======================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ======================================
# SERVER CONFIGURATION
# ======================================
PORT=8000
HOST=0.0.0.0

# ======================================
# BUSINESS DETAILS
# ======================================
# These override defaults from data/business.json
SHOP_NAME=Stuffed Lamb
SHOP_ADDRESS=210 Broadway, Reservoir VIC 3073
SHOP_TIMEZONE=Australia/Melbourne

# ======================================
# TAX CONFIGURATION
# ======================================
# Australian GST (all menu prices include GST)
GST_RATE=0.10

# ======================================
# SESSION CONFIGURATION
# ======================================
# Session timeout in SECONDS (default: 1800 = 30 minutes)
SESSION_TTL=1800
# Maximum concurrent sessions (in-memory mode only, ignored if using Redis)
MAX_SESSIONS=1000

# ======================================
# TWILIO SMS CONFIGURATION (Required for notifications)
# ======================================
# Get credentials from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
# Your Twilio phone number (E.164 format: +61...)
# IMPORTANT: Use TWILIO_FROM not TWILIO_FROM_NUMBER!
TWILIO_FROM=+61xxxxxxxxxx
# Shop phone for order notifications (REQUIRED!)
SHOP_ORDER_TO=+61xxxxxxxxxx

# ======================================
# MENU LINK
# ======================================
# URL sent to customers via SMS
MENU_LINK_URL=https://stuffed-lamb.tuckerfox.com.au/

# ======================================
# REDIS CONFIGURATION (Optional but Recommended for Production)
# ======================================
# For session storage - falls back to in-memory if unavailable
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=your_redis_password_here

# ======================================
# SECURITY & CORS CONFIGURATION
# ======================================
# Allowed origins (use comma-separated list for production)
ALLOWED_ORIGINS=https://voice.openai.com
# Shared secret used to authenticate webhook calls (required in prod)
WEBHOOK_SHARED_SECRET=change-me

# ======================================
# NOTIFICATION & FAILOVER CONTROLS
# ======================================
# Background notification queue settings
SMS_MAX_RETRIES=3
# Number of consecutive SMS failures before triggering secondary channel
SMS_FAILOVER_THRESHOLD=3
# Enable secondary notifications via email when SMS fails repeatedly
ENABLE_SECONDARY_NOTIFICATIONS=false
FAILOVER_NOTIFICATION_EMAIL=ops@stuffedlamb.com
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
SMTP_FROM=orders@stuffedlamb.com

# ======================================
# SETUP INSTRUCTIONS
# ======================================
# 1. Copy this file: cp .env.example .env
# 2. Update TWILIO_* with your credentials
# 3. Update phone numbers (use E.164 format: +61...)
# 4. Update SHOP_ORDER_TO with actual shop phone
# 5. For production: Install Redis and configure REDIS_* vars
# 6. Never commit .env to git!

# ======================================
# IMPORTANT NOTES - Stuffed Lamb Specific
# ======================================
# - Closed Monday & Tuesday (configured in data/hours.json)
# - Operating Hours: Wed-Fri 1pm-9pm, Sat-Sun 1pm-10pm
# - Menu focuses on Mandi dishes and Mansaf
# - No combo meals (unlike Kebabalab)
# - Uses same 18 VAPI tools as Kebabalab
# - Variable names MUST match exactly (SESSION_TTL not SESSION_TTL_SECONDS!)
# - Phone numbers MUST be in E.164 format (+61...)
